<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ Chat Support</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f1f1f1;
            margin: 0;
            padding: 0;
        }

        .chat-container {
            max-width: 500px;
            border: solid;
            border-color: black;
            margin: 50px auto;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .chat-header {
            padding: 10px;
            background: #007bff;
            color: #fff;
            text-align: center;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }

        .chat-body {
            height: 400px;
            overflow-y: scroll;
            padding: 20px;
            border-bottom: 1px solid #ddd;
        }

        .message {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            font-family: "Times New Roman", Times, serif;
        }

        .message.bot {
            justify-content: flex-start;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message .content {
            display: inline-block;
            padding: 10px;
            border-radius: 5px;
            max-width: 70%;
        }

        .message.bot .content {
            background: #f1f1f1;
        }

        .message.user .content {
            background: #007bff;
            color: #fff;
        }

        .message .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
        }

        .message.user .avatar {
            display: none;
        }

        .menu-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            background: #007bff;
            color: #fff;
            border-top: 1px solid #ddd;
            position: relative;
            z-index: 5;
        }

        .question-list {
            display: none;
            position: absolute;
            font-family: "Times New Roman", Times, serif;
            bottom: 85px;
            left: 0;
            width: 100%;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .question-list div {
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
        }

        .question-list div:hover {
            background: #007bff;
            color: #fff;
        }

        .chat-footer {
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            background: #007bff;
            color: #fff;
            border-top: 1px solid #ddd;
        }

        .clear-button {
            padding: 5px 10px;
            background: #ff4d4d;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .clear-button:hover {
            background: #ff1a1a;
        }

        .input-container {
            display: none;
            position: absolute;
            bottom: 44px;
            left: 0;
            width: 100%;
            height: 41px;
            background: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
    </style>
</head>

<body>
    <div class="chat-container">
        <div class="chat-header">
            FAQ Chat Support
        </div>
        <div class="chat-body" id="chatBody">
            <!-- Messages will appear here -->
        </div>
        <div class="question-list" id="questionList">
            <!-- Questions will appear here -->
        </div>
        <div class="input-container" id="inputContainer">
            <label for="marksInput">Enter Marks:</label>
            <input type="number" id="marksInput" min="0" max="100" value="0">
            <button type="button" onclick="submitMarks()">Submit</button>
        </div>
        <div class="menu-icon" onclick="toggleQuestionList()">☰ Frequently Asked Questions ☰</div>
        <div class="chat-footer">
            <button class="clear-button" onclick="clearMessages()">Clear Messages</button>
        </div>
    </div>
    <script>
        const chatBody = document.getElementById('chatBody');
        const questionList = document.getElementById('questionList');
        const inputContainer = document.getElementById('inputContainer');
        const marksInput = document.getElementById('marksInput');

        const preloadedQA = {
            "What is your name?": "I am a chatbot created to assist you.",
            "How can you help me?": "I can answer your questions and provide information.",
            "I have queries regarding undergraduate entry requirements": "What kind of undergraduate entry requirements you are concerned about? Choose your type of query from the menu.",
            "I have queries regarding postgraduate entry requirements": "What kind of postgraduate entry requirements you are concerned about? Choose your type of query from the menu.",
        };

        const ugentryRequirementOptions = {
            "Academic requirements for undergraduate courses": "For Academic entry requirements, you need to provide transcripts and certificates.",
            "English Waiver requirements for undergraduate courses": "An English waiver may be provided if you have completed a degree in an English-speaking country.",
            "English Language Test requirements for undergraduate courses": "You need to provide scores from an approved English language test like TOEFL or IELTS.",
            "Restart the chat": "Hello! How can I assist you again?<br>Please choose your querry from the below FAQ Menu.",
        };

        const pgentryRequirementOptions = {
            "Academic requirements for postgraduate courses": "For Academic entry requirements, you need to provide transcripts and certificates.",
            "English Waiver requirements for postgraduate courses": "An English waiver may be provided if you have completed a degree in an English-speaking country.",
            "English Language Test requirements for postgraduate courses": "You need to provide scores from an approved English language test like TOEFL or IELTS.",
            "Restart the chat": "Hello! How can I assist you again?<br>Please choose your querry from the below FAQ Menu.",
        };

        let selectedCourseType = ''; // Track the selected course type

        function addMessage(content, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender);

            const avatar = document.createElement('img');
            avatar.src = "https://www.crizac.com/catalog/view/new_design/img/favicon_crizac.png";
            avatar.classList.add('avatar');

            const messageContent = document.createElement('div');
            messageContent.classList.add('content');
            messageContent.innerHTML = content; // Use innerHTML instead of textContent to allow HTML tags

            if (sender === 'bot') {
                messageElement.appendChild(avatar);
            }

            messageElement.appendChild(messageContent);
            chatBody.appendChild(messageElement);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function toggleQuestionList() {
            questionList.style.display = questionList.style.display === 'none' ? 'block' : 'none';
        }

        function selectQuestion(question) {
            addMessage(question, 'user');
            setTimeout(() => {
                const botResponse = preloadedQA[question] || "I'm sorry, I don't understand that.";
                addMessage(botResponse, 'bot');
                if (question === "I have queries regarding undergraduate entry requirements") {
                    selectedCourseType = 'ug';
                    updateQuestionList(ugentryRequirementOptions);
                } else if (question === "I have queries regarding postgraduate entry requirements") {
                    selectedCourseType = 'pg';
                    updateQuestionList(pgentryRequirementOptions);
                }
            }, 500);
            toggleQuestionList();
        }

        function updateQuestionList(questions) {
            questionList.innerHTML = '';
            for (let question in questions) {
                const questionElement = document.createElement('div');
                questionElement.textContent = question;
                questionElement.onclick = () => selectEntryRequirement(question);
                questionList.appendChild(questionElement);
            }
        }

        let selectedEntryRequirement = '';

        function selectEntryRequirement(option) {
            selectedEntryRequirement = option; // Track the selected option
            addMessage(option, 'user');
            setTimeout(() => {
                if (selectedEntryRequirement === 'Academic requirements for undergraduate courses') {
                    const botResponse = "How many percentile marks you have got in your higher secondary exam? Please put that below.";
                    addMessage(botResponse, 'bot');
                    showInputContainer();
                } else if (selectedEntryRequirement === 'Academic requirements for postgraduate courses') {
                    const botResponse = "How many percentile marks you have got in your undergraduate exam? Please put that below.";
                    addMessage(botResponse, 'bot');
                    showInputContainer();
                } else if (selectedEntryRequirement === 'Restart the chat') {
                    addMessage("Hello! How can I assist you again?<br>Please choose your querry from the below FAQ Menu.", 'bot');
                    loadInitialQuestions();
                    hideInputContainer();
                    selectedCourseType = ''; // Reset the course type
                } else {
                    const botResponse = selectedCourseType === 'ug' ? ugentryRequirementOptions[option] : pgentryRequirementOptions[option];
                    addMessage(botResponse, 'bot');
                    hideInputContainer();
                }
            }, 500);
            toggleQuestionList();
        }

        function showInputContainer() {
            inputContainer.style.display = 'flex';
            inputContainer.style.justifyContent = 'center';
            inputContainer.style.alignItems = 'center';
        }

        function hideInputContainer() {
            inputContainer.style.display = 'none';
        }

        function submitMarks() {
            const marks = marksInput.value;
            addMessage(`I have scored ${marks}`, 'user');
            inputContainer.style.display = 'none';
            marksInput.value = '0';
            setTimeout(() => {
                if (selectedEntryRequirement === 'Academic requirements for undergraduate courses' && marks >= 90) {
                    const botResponse = `You are eligible to get admission in the following universities:<br>1. Anglia Ruskin University<br>2. Coventry University`;
                    addMessage(botResponse, 'bot');
                } else if (selectedEntryRequirement === 'Academic requirements for postgraduate courses' && marks >= 60) {
                    const botResponse = `You are eligible to get admission in the following universities:<br>1. Birmingham City University<br>2. Bangor University`;
                    addMessage(botResponse, 'bot');
                } else {
                    const botResponse = "Unfortunately, you do not meet the minimum eligibility criteria.";
                    addMessage(botResponse, 'bot');
                }
                selectedEntryRequirement = ''; // Reset the variable after handling
            }, 500);
        }

        function clearMessages() {
            chatBody.innerHTML = '';
            addMessage("Hello! How can I assist you again?<br>Please choose your querry from the below FAQ Menu.", 'bot');
            loadInitialQuestions();
            hideInputContainer();
            selectedCourseType = ''; // Reset the course type
        }

        function loadInitialQuestions() {
            questionList.innerHTML = '';
            for (let question in preloadedQA) {
                const questionElement = document.createElement('div');
                questionElement.textContent = question;
                questionElement.onclick = () => selectQuestion(question);
                questionList.appendChild(questionElement);
            }
        }

        // Adding some initial bot message and loading questions
        window.onload = function () {
            addMessage("Hello! How can I assist you today?<br>Please choose your querry from the below FAQ Menu.", 'bot');
            loadInitialQuestions();
        };
    </script>
</body>

</html>
